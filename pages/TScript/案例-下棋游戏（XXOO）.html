<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>下棋游戏（XXOO） | 小女生首页</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/photo.jpg">
    <meta name="description" content="小女生的前端记录">
    
    <link rel="preload" href="/assets/css/0.styles.723d6123.css" as="style"><link rel="preload" href="/assets/js/app.2d1dd0b0.js" as="script"><link rel="preload" href="/assets/js/2.07c258a3.js" as="script"><link rel="preload" href="/assets/js/18.9ae13edc.js" as="script"><link rel="prefetch" href="/assets/js/10.53e90345.js"><link rel="prefetch" href="/assets/js/11.21a5b5ff.js"><link rel="prefetch" href="/assets/js/12.024859e6.js"><link rel="prefetch" href="/assets/js/13.a9dc1bfe.js"><link rel="prefetch" href="/assets/js/14.1ea943f5.js"><link rel="prefetch" href="/assets/js/15.d7d1d2ad.js"><link rel="prefetch" href="/assets/js/16.3dc60ad1.js"><link rel="prefetch" href="/assets/js/17.266395e8.js"><link rel="prefetch" href="/assets/js/19.6ddfd93e.js"><link rel="prefetch" href="/assets/js/20.11446c36.js"><link rel="prefetch" href="/assets/js/3.71dfdb29.js"><link rel="prefetch" href="/assets/js/4.7c3dfb1b.js"><link rel="prefetch" href="/assets/js/5.abcf9e59.js"><link rel="prefetch" href="/assets/js/6.3a87541a.js"><link rel="prefetch" href="/assets/js/7.b7cc106e.js"><link rel="prefetch" href="/assets/js/8.c0828407.js"><link rel="prefetch" href="/assets/js/9.c75cd91a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.723d6123.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/photo.jpg" alt="小女生首页" class="logo"> <span class="site-name can-hide">小女生首页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/TScript/01-TypeScript基本介绍.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="/pages/folder1/test3.html" class="nav-link">
  功能演示
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/TScript/01-TypeScript基本介绍.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="/pages/folder1/test3.html" class="nav-link">
  功能演示
</a></div><div class="nav-item"><a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/TScript/01-TypeScript基本介绍.html" class="sidebar-link">01-TypeScript基本介绍</a></li><li><a href="/pages/TScript/02-TypeScript运算符、条件语句、循环、函数、断点调试.html" class="sidebar-link">02-TypeScript运算符、条件语TScript/句、循环、函数、断点调试</a></li><li><a href="/pages/TScript/03-Number、String、Array、Map、Object.html" class="sidebar-link">03-Number、String、Array、Map、ObTScript/ject</a></li><li><a href="/pages/TScript/04-元组、联合类型、接口.html" class="sidebar-link">04-元组、联合类型、接口</a></li><li><a href="/pages/TScript/05-类、对象、命名空间.html" class="sidebar-link">05-类、对象、命名空间</a></li><li><a href="/pages/TScript/06-类型断言、解构、展开.html" class="sidebar-link">06-类型断言、解构、展开</a></li><li><a href="/pages/TScript/07-模块、声明文件.html" class="sidebar-link">07-模块、声明文件</a></li><li><a href="/pages/TScript/08-变量声明.html" class="sidebar-link">08-变量声明</a></li><li><a href="/pages/TScript/案例-下棋游戏（XXOO）.html" class="active sidebar-link">案例-下棋游戏（XXOO）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/TScript/案例-下棋游戏（XXOO）.html#一、项目准备" class="sidebar-link">一、项目准备</a></li><li class="sidebar-sub-header"><a href="/pages/TScript/案例-下棋游戏（XXOO）.html#二、点击下棋" class="sidebar-link">二、点击下棋</a></li><li class="sidebar-sub-header"><a href="/pages/TScript/案例-下棋游戏（XXOO）.html#三、总结" class="sidebar-link">三、总结</a></li><li class="sidebar-sub-header"><a href="/pages/TScript/案例-下棋游戏（XXOO）.html#扩展知识点" class="sidebar-link">扩展知识点</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/Vue3/vue3快速上手.html" class="sidebar-link">vue3快速上手</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>面试题总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/InterviewQuestsSum/面试题.html" class="sidebar-link">面试题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="下棋游戏-xxoo"><a href="#下棋游戏-xxoo" class="header-anchor">#</a> 下棋游戏（XXOO）</h1> <h2 id="一、项目准备"><a href="#一、项目准备" class="header-anchor">#</a> 一、项目准备</h2> <p>两种写JavaScript代码的方式：</p> <ol><li><p>在script标签中写js代码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token operator">...</span>js代码
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>单独创建一个js文件，使用script标签的src属性引入</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <p>注意：两种写js的方式不能参杂使用，虽然不报错，但是仅js文件有用，&lt;script&gt;标签里面的内容不起作用。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// 这里的代码不起作用</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'hello'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1、自动刷新浏览器"><a href="#_1、自动刷新浏览器" class="header-anchor">#</a> 1、自动刷新浏览器</h3> <p>问题：每次修改页面内容后，都要手动刷新浏览器，才能看到修改后的内容。</p> <p>解决方法：使用 Live Server 插件，实现自动刷新浏览器。</p> <p>作用：监视HTML或引入的CSS、js的变化，在保存文件时，该插件就会帮我们自动刷新浏览器。</p> <p>使用方式：在HTML文件中，点击鼠标右键，再点击 open with Live Server 按钮即可。</p> <p>注意：HTML文件所在的文件夹名称不要包含中文，否则，打开页面失败，插件功能无法生效！</p> <h3 id="_2、浏览器中运行ts"><a href="#_2、浏览器中运行ts" class="header-anchor">#</a> 2、浏览器中运行TS</h3> <p>注意：浏览器中只能运行JS，无法直接运行TS，因此，需要将TS转化为JS，然后再运行。</p> <p>浏览器中运行TS的步骤：</p> <ol><li>使用命令<code>tsc index.ts</code>将TS文件转化为JS文件。</li> <li>在页面中，使用&lt;script&gt;标签引入生成的JS文件（注意是JS文件）。</li></ol> <p>问题：每次修改ts文件后，都要重新运行tsc命令将TS转化为JS，很麻烦！</p> <p>解决方法：使用tsc命令的监视模式。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ tsc <span class="token parameter variable">--watch</span> index.ts
</code></pre></div><p>解释：<code>--watch</code>表示启用监视模式，只要重新保存了TS文件，就会自动调用tsc将TS转化为JS。</p> <h3 id="_3、类型断言"><a href="#_3、类型断言" class="header-anchor">#</a> 3、类型断言</h3> <p>问题：调用querySelector()通过id选择器获取DOM元素时，拿到的元素类型都是Element。</p> <p>因为无法根据id确定元素的类型，所以，该方法就返回一个宽泛的类型：元素（Element）类型。</p> <p>不管h1还是img都是元素。</p> <p>导致新问题：无法访问img元素的src属性了。</p> <p>因为：Element类型只包含所有元素共有的属性和方法（比如：id属性）。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#title'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
img<span class="token punctuation">.</span>src <span class="token comment">// error，报错，Element元素没有src属性</span>
</code></pre></div><p>解决方法：使用类型断言，来手动指定更加具体的类型（比如，此处应该比Element类型更加具体）</p> <p>语法：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>值 <span class="token keyword">as</span> 更具体的类型
</code></pre></div><p>例：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#image'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLImageElement
</code></pre></div><p>解释：我们确定 <code>id = 'image'</code> 的元素是图片元素，所以，我们将类型指定为HTMLImageElement。</p> <p>技巧：通过<code>console.dir()</code>打印DOM元素，在属性的最后面，即可看到该元素的类型。</p> <p>使用场景：当你比TS更了解某个值的类型，并且需要指定更具体的类型时。</p> <h3 id="_4、游戏演示"><a href="#_4、游戏演示" class="header-anchor">#</a> 4、游戏演示</h3> <p>玩法：两个玩家，一个玩家使用（X），一个玩家使用（O），轮流在棋盘上下棋（点击单元格）。</p> <p>获胜条件：横、竖、斜（对角线）三个棋子相同。</p> <p>平局：棋盘满子，但是，不满足任何一种获胜条件。</p> <h3 id="_5、游戏模板说明"><a href="#_5、游戏模板说明" class="header-anchor">#</a> 5、游戏模板说明</h3> <p>重点：运用学到的TS知识，来开发下棋游戏。</p> <p>模板（HTML、CSS）说明：</p> <ol><li>下一步提示：给游戏面板（#bord），添加x或者o类名。</li> <li>下棋（点击单元格）：给单元格（.cell）标签，添加x或o类名。</li> <li>展示和隐藏获胜信息：设置获胜信息面板（#message）标签的样式属性display。</li></ol> <h2 id="二、点击下棋"><a href="#二、点击下棋" class="header-anchor">#</a> 二、点击下棋</h2> <h3 id="_1、单元格点击"><a href="#_1、单元格点击" class="header-anchor">#</a> 1、单元格点击</h3> <p>效果：点击棋盘的任意单元格，单元格显示X（默认）。</p> <ol><li>获取到所有的单元格列表。</li> <li>遍历单元格列表，给每一个单元格添加点击事件。</li> <li>给当前被点击的单元格添加类名X。</li></ol> <p>优化（1）：防止单元格重复点击，在添加事件时，使用once 属性，让单元格只能被点击一次。</p> <p>优化（2）：使用函数声明形式的事件处理程序（代码多了后，代码结构会更清晰）。</p> <h3 id="_2、切换玩家"><a href="#_2、切换玩家" class="header-anchor">#</a> 2、切换玩家</h3> <p>效果：玩家（X）和玩家（O）轮流交替下棋。</p> <ol><li>创建一个存储当前玩家的变量（currentPlayer），默认值为：x。</li> <li>将添加给单元格时写死的类名 x，替换为变量（currentPlayer）的值。</li> <li>切换到另一个玩家：在添加类名（下棋完成一步）后，根据当前玩家，得到另外一个玩家。</li> <li>处理下一步提示：移除游戏面板中的 x 或 o 类名，添加下一个玩家对应的类名。</li></ol> <h3 id="_3、枚举"><a href="#_3、枚举" class="header-anchor">#</a> 3、枚举</h3> <p>使用变量（currentPlayer）处理当前玩家，存在的问题：</p> <p>变量的类型是string，它的值可以是任意字符串。</p> <p>如果不小心写错了（o --&gt; 0），代码不会报错，但功能就无法实现了，并且很难找错。</p> <p>也就是：string类型的变量，取值太宽泛，无法很好的限制为x或o。</p> <p>枚举是组织有关联数据的一种方式（比如：x和o就是有关联的数据）。</p> <p>使用场景：当变量的值，<strong>只能是几个固定值中的一个</strong>，应该使用<strong>枚举</strong>来实现。</p> <p>注意：<strong>JS中没有枚举</strong>，这是TS为了弥补JS自身不足而新增的。</p> <h4 id="_3-1-语法"><a href="#_3-1-语法" class="header-anchor">#</a> 3.1 语法</h4> <p>创建枚举的语法：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> 枚举名称 <span class="token punctuation">{</span> 成员<span class="token number">1</span><span class="token punctuation">,</span> 成员<span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
</code></pre></div><p>示例：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female<span class="token punctuation">,</span> Male <span class="token punctuation">}</span>
<span class="token keyword">enum</span> Player <span class="token punctuation">{</span> <span class="token constant">X</span><span class="token punctuation">,</span> <span class="token constant">O</span> <span class="token punctuation">}</span>
</code></pre></div><p>约定枚举名称、成员名称以大写字母开头。</p> <p>多个成员之间使用逗号（<code>,</code>）分隔。</p> <p>注意：枚举中的成员，根据功能自己指定！</p> <p>注意：枚举中的成员不是键值对！</p> <h4 id="_3-2-使用枚举"><a href="#_3-2-使用枚举" class="header-anchor">#</a> 3.2 使用枚举</h4> <p><strong>枚举是一种类型</strong>，因此，可以其作为<strong>变量的类型注解</strong>。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female<span class="token punctuation">,</span> Male <span class="token punctuation">}</span>
<span class="token keyword">let</span> uerGender<span class="token operator">:</span> Gender
</code></pre></div><p>访问枚举（Gender）中的成员，作为变量（userGender）的值：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>userGender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Female
userGender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Male
</code></pre></div><p>注意：<strong>枚举成员是只读的</strong>，也就是说枚举中的成员可以访问，但是不能赋值！</p> <div class="language-ts extra-class"><pre class="language-ts"><code>Gender<span class="token punctuation">.</span>Female <span class="token operator">=</span> <span class="token string">'女'</span> <span class="token comment">// 错误！</span>
</code></pre></div><h4 id="_3-3-数字枚举"><a href="#_3-3-数字枚举" class="header-anchor">#</a> 3.3 数字枚举</h4> <p>问题：将枚举成员赋值给变量，变量的值是什么呢？</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female<span class="token punctuation">,</span> Male <span class="token punctuation">}</span>
<span class="token keyword">let</span> uerGender<span class="token operator">:</span> Gender <span class="token operator">=</span> Gender<span class="token punctuation">.</span>Female
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>uerGender<span class="token punctuation">)</span> <span class="token comment">// 0</span>
</code></pre></div><p><strong>枚举成员是有值的</strong>，默认为：从 0 开始自增的数值。</p> <p>我们把，枚举成员的值为数字的枚举，称为：<strong>数字枚举</strong>，默认就是数字枚举。</p> <p>当然，也可以给枚举中的成员初始化值。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Male <span class="token punctuation">}</span> <span class="token comment">// Female =&gt; 1 Male =&gt; 2</span>
<span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Male <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token comment">// Female =&gt; 1 Male =&gt; 100</span>
</code></pre></div><h4 id="_3-4-字符串枚举"><a href="#_3-4-字符串枚举" class="header-anchor">#</a> 3.4 字符串枚举</h4> <p>字符串枚举：枚举成员的值是字符串。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">enum</span> Gender <span class="token punctuation">{</span> Female <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">,</span> Male <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token punctuation">}</span>
</code></pre></div><p>注意：字符串枚举没有自增长行为，因此，每个成员必须有初始值。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>Female<span class="token punctuation">)</span> <span class="token comment">// 女</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Gender<span class="token punctuation">.</span>Male<span class="token punctuation">)</span> <span class="token comment">// 男</span>
</code></pre></div><p>总结：枚举是一组有名字的常量（只读）的集合。</p> <h4 id="_3-5-使用枚举修改当前玩家"><a href="#_3-5-使用枚举修改当前玩家" class="header-anchor">#</a> 3.5 使用枚举修改当前玩家</h4> <p>效果：使用枚举代替原来的字符串类名（x和o）。</p> <ol><li>创建字符串枚举（Player），提供 X 和 O 两个成员。</li> <li>将成员 X 的值设置为：'x'（类名）；将成员 O 的值设置为：'o'（类名）。</li> <li>将变量（currentPlayer）的类型设置为Player枚举类型，默认值为Player.X。</li> <li>将所有用到 x 和 o 的地方全部使用枚举成员代替。</li></ol> <h3 id="_4、游戏判赢"><a href="#_4、游戏判赢" class="header-anchor">#</a> 4、游戏判赢</h3> <h4 id="_4-1-判赢的思路"><a href="#_4-1-判赢的思路" class="header-anchor">#</a> 4.1 判赢的思路</h4> <p>思路：判断棋盘中，横、竖、斜（对角线）是否存在三个相同的x或o。</p> <p>只要有一个满足条件，就说明x或o获胜了。</p> <p>如果所有单元格都有内容，但没有获胜的情况，就说明是平局。</p> <p>如何判断呢？</p> <p>单元格元素列表（cells）中，每个单元格元素都有自己的索引，如下图所示：</p> <p><img src="demo-imgs/01-%E5%88%A4%E8%B5%A2%E6%80%9D%E8%B7%AF.png" alt=""></p> <p>使用单元格索引，来表示每种获胜情况（使用数组来存储，比如：[0, 1, 2]）。</p> <p>然后，使用一个“大”数组（外层），来存储这8种情况（因为每次判赢都要判断所有情况）。</p> <p>判断过程：遍历这个大数组，分别判断每一种情况对应的3个单元格元素，是否都是相同的 x 或 o 类名。</p> <p>只要有一种情况满足，就说明获胜了。</p> <h4 id="_4-2-分析判赢数组"><a href="#_4-2-分析判赢数组" class="header-anchor">#</a> 4.2 分析判赢数组</h4> <p>数组的基本结构：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">[</span> 元素<span class="token number">1</span><span class="token punctuation">,</span> 元素<span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span>
</code></pre></div><p>判赢数组：每个元素又是数组（二维数组，概念知道即可）。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> winsArr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>
<span class="token punctuation">]</span>
</code></pre></div><p>只要是数组用法都一样，比如：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 访问数组元素：</span>
winsArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// [0, 1, 2]</span>
winsArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 1</span>
</code></pre></div><h4 id="_4-3-单元格元素列表说明"><a href="#_4-3-单元格元素列表说明" class="header-anchor">#</a> 4.3 单元格元素列表说明</h4> <p>单元格元素类别（cells），实际上是一个伪数组。</p> <p>伪数组的特征：具有长度（length）属性和索引。</p> <p>伪数组的操作：1 通过索引获取元素  2 使用for循环遍历（推荐使用 forEach 方法）。</p> <ol><li><p>通过索引获取元素</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cells<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cells<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>使用for循环遍历</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cells<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cells<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="_4-4-封装判赢函数"><a href="#_4-4-封装判赢函数" class="header-anchor">#</a> 4.4 封装判赢函数</h4> <p>封装函数，主要考虑：参数和返回值。</p> <p>该函数的返回值是什么？           布尔值（判断是否获胜）</p> <p>该函数有参数吗？是什么？       当前玩家</p> <p>说明：判赢，就是在判断当前玩家下棋后是否获胜（玩家没下棋，不可能获胜，不需要判断）。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 声明函数：</span>
<span class="token keyword">function</span> <span class="token function">checkWin</span><span class="token punctuation">(</span>player<span class="token operator">:</span> Player<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 调用函数：</span>
<span class="token keyword">let</span> isWin <span class="token operator">=</span> <span class="token function">checkWin</span><span class="token punctuation">(</span>currentPlayer<span class="token punctuation">)</span>
</code></pre></div><p>技巧：如果想不到返回值和参数，可以反推，也就是从如何调用函数的角度来分析。</p> <p>问题：什么时候判赢？       玩家点击单元格下棋后</p> <p>步骤：</p> <ol><li>声明函数（checkWin），指定参数（player），类型注解为：Player枚举。</li> <li>指定返回值：现在函数中写死返回 true 或 false。</li> <li>在给单元格添加类名后（下棋后），调用函数 checkWin，拿到函数返回值。</li> <li>判断函数返回值是否为 true，如果是，说明当前玩家获胜了。</li></ol> <h4 id="_4-5-实现判赢函数"><a href="#_4-5-实现判赢函数" class="header-anchor">#</a> 4.5 实现判赢函数</h4> <p>思路：遍历判赢数组，分别判断每种情况对应的 3 个单元格元素，是否同时包含当前玩家的类名。</p> <p>问题：使用哪种方式遍历数组呢？</p> <p><strong>只要有一种情况满足</strong>，就表示玩家获胜，后续的情况就没有必要再遍历，因此，数组遍历时可以终止。</p> <p>判赢函数的返回值是布尔值，如果玩家获胜（有一种情况满足），就返回 true；否则，返回 false。</p> <p>数组的 some 方法：1 遍历数组时可终止     2 方法返回值为 true 或 false。</p> <p>思路：遍历判赢数组，分别判断每种情况对应的 3 个单元格元素，是否同时包含当前玩家的类名。</p> <ol><li><p>使用 some 方法遍历数组，并将 some 方法的返回值作为判赢函数的返回结果。</p></li> <li><p>在 some 方法的回调函数中，获取到每种获胜情况对应的 3 个单元格元素。</p></li> <li><p>判断这 3 个单元格元素是否同时包含当前玩家的类名。</p> <p>重点：</p> <p>1 元素是否包含类名 classList.contains()</p> <p>2 同时包含（逻辑运算符 &amp;&amp;）</p></li> <li><p>如果包含（玩家获胜），就在回调函数中返回 true 停止循环；否则，返回 false ，继续下一次循环。</p></li></ol> <h4 id="_4-6-优化判赢函数"><a href="#_4-6-优化判赢函数" class="header-anchor">#</a> 4.6 优化判赢函数</h4> <ol><li>去掉判赢函数的中间变量（isWin、cell1、cell2、cell3）。</li> <li>封装函数（hasClass）：判断DOM元素是否包含某个类名。</li></ol> <h4 id="_4-7-判断平局"><a href="#_4-7-判断平局" class="header-anchor">#</a> 4.7 判断平局</h4> <p>思路：创建变量（steps），记录已下棋的次数，判断steps是否等于9，如果等于说明平局。</p> <p>注意：先判赢，再判断平局！</p> <ol><li>创建变量（steps），默认值为0。</li> <li>在玩家下棋后，让steps加1。</li> <li>在判赢的代码后面，判断steps是否等于9。</li> <li>如果等于9说明是平局，游戏结束，就直接return，不再执行后续代码。</li></ol> <h4 id="_4-8-展示获胜信息"><a href="#_4-8-展示获胜信息" class="header-anchor">#</a> 4.8 展示获胜信息</h4> <p>效果：在获胜或平局时，展示相应信息。</p> <ol><li>获取到与获胜信息相关的两个DOM元素：1 #message  2 #winner。</li> <li>显示获胜信息面板（通过style属性实现）。</li> <li>展示获胜信息：如果获胜，展示“X赢了！”或“O赢了！”；如果是平局，展示“平局”。</li></ol> <h3 id="_5、重新游戏"><a href="#_5、重新游戏" class="header-anchor">#</a> 5、重新游戏</h3> <p>效果：点击重新开始游戏，重新开始下棋游戏。</p> <p>说明：重新开始游戏，实际上就是要重置游戏中的所有数据，恢复到初始状态。</p> <p>比如：隐藏获胜信息、重置下棋次数、清空棋盘等等。</p> <ol><li>获取到重新开始按钮（#restart），并绑定点击事件。</li> <li>在点击事件中，重置游戏数据。</li> <li>隐藏获胜信息、清空棋盘、移除单元格点击事件、重新给单元格绑定点击事件。</li> <li>重置下棋次数、重置默认玩家为x，重置下棋提示为x。</li></ol> <p>优化重新游戏功能：</p> <p>原来，下棋分为：1 第一次游戏    2 重新开始游戏</p> <p>现在，将第一次游戏，也看做是“重新开始游戏”，就可以去掉第一次游戏时重复的初始化操作了。</p> <ol><li>将重新开始按钮的事件处理程序修改为：函数声明形式（startGame）。</li> <li>之间调用函数（startGame），来开始游戏。</li> <li>移除变量steps、currentPlayer的默认值，并添加明确的类型注解。</li> <li>移除给单元格绑定事件的代码。</li></ol> <h2 id="三、总结"><a href="#三、总结" class="header-anchor">#</a> 三、总结</h2> <p>下棋游戏（XXOO）</p> <ol><li>使用学到的TS、Web开发知识，从零开始完成了下棋游戏。</li> <li>TS知识：变量声明、枚举、类型断言、函数（参数、返回值）等。</li> <li>枚举：是一组有名字的常量的集合，用来组织有关联的数据。</li> <li>类型断言：在我们比TS更明确变量的类型时，用来指定具体类型。</li> <li>函数封装：主要考虑参数和返回值，也就是接受要处理的数据，返回处理后的结果。</li> <li>实现功能：分步骤实现，完成一步，也验证一步（先实现，再优化）。</li> <li>DOM操作：获取元素、添加移除事件、事件对象、样式操作、文本内容。</li> <li>伪数组：具有长度（length）属性和索引（长得像、操作也像数组）。</li></ol> <h2 id="扩展知识点"><a href="#扩展知识点" class="header-anchor">#</a> 扩展知识点</h2> <h3 id="_1、css3-not-选择器"><a href="#_1、css3-not-选择器" class="header-anchor">#</a> 1、CSS3 :not 选择器</h3> <p>定义和用法：</p> <p>:not(<i>selector</i>) 选择器匹配非指定元素/选择器的每个元素。</p> <p>例：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 设置非 &lt;p&gt; 元素的所有元素的背景色 */</span>
<span class="token selector">:not(p)</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ff0000
<span class="token punctuation">}</span>
</code></pre></div><p>案例中：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* 游戏面板棋盘 */</span>
<span class="token selector">.game-board</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 471px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 471px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.game-board.x .cell:not(.x):not(.o):hover:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'X'</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.game-board.o .cell:not(.x):not(.o):hover:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'O'</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2、eventtarget-addeventlistener-type-listener-options"><a href="#_2、eventtarget-addeventlistener-type-listener-options" class="header-anchor">#</a> 2、EventTarget.addEventListener(type, listener, options)</h3> <p>addEventListener()事件的参数约定有三种情况：</p> <div class="language-js extra-class"><pre class="language-js"><code>target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">[</span><span class="token punctuation">,</span> useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">[</span><span class="token punctuation">,</span> useCapture<span class="token punctuation">,</span> wantsUntrusted<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Gecko/Mozilla only</span>
</code></pre></div><p>其中第二种的第三个参数<code>useCapture</code>表示：控制监听器是在捕获阶段执行还是在冒泡阶段执行，true表示在捕获阶段执行，false表示在冒泡阶段执行，默认值是false。</p> <p>第一种方式的option选项：</p> <p>一个指定有关<code>listener</code>属性的可选参数对象。可用的选项如下：</p> <ul><li>capture：<code>Boolean</code>，表示<code>listener</code>会在该类型的事件捕获阶段传播到该<code>EventTarget</code>时触发。</li> <li>once：<code>Boolean</code>，表示<code>listener</code>在添加之后最多只调用一次。如果是<code>true</code>，<code>listener</code>会在其被调用之后自动移除。</li> <li>passive：<code>Boolean</code>，设置为true时，表示<code>listener</code>永远不会调用<code>preventDefault()</code>。如果<code>listener</code>仍然调用了这个函数，客户端将会忽略它并抛出一个控制台警告。</li> <li>mozSystemGroup：只能在 XBL 或者 Firefox' chrome 使用，这是个<code>Boolean</code>，表示<code>listener</code>被添加到 system group。</li></ul> <p>案例中：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * 单元格点击：
 * 1.获取到所有的单元格列表。
 * 2.遍历单元格列表，给每一个单元格添加点击事件。
 * 3.给当前被点击的单元格添加类名 x。
 *
 * 优化（1）：防止单元格重复点击，在添加事件时，使用once 属性，让单元格只能被点击一次。
 */</span>
<span class="token keyword">let</span> cells <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.cell'</span><span class="token punctuation">)</span>
cells<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> cell <span class="token operator">=</span> item <span class="token keyword">as</span> HTMLDivElement
  cell<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log('click', event.target)</span>
    <span class="token keyword">let</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target <span class="token keyword">as</span> HTMLDivElement
    target<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> once<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3、dom元素-classlist-contains"><a href="#_3、dom元素-classlist-contains" class="header-anchor">#</a> 3、Dom元素.classList.contains()</h3> <ul><li><p>classList.contains(oldClassName)</p> <p>确定元素中是否包含指定的类名，返回值为true/false；</p></li> <li><p>classList.add(newClassName)</p> <p>添加新的类名，如已经存在，取消添加；</p></li> <li><p>classList.remove(oldClassName)</p> <p>移除已经存在的类名；</p></li> <li><p>classList.toggle(className)</p> <p>如果classList中存在给定的值，删除它，否则，添加它；</p></li> <li><p>classList.replace(oldClassName, newClassName)</p> <p>类名替换，新类newClassName替换老类oldClassName；</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/TScript/08-变量声明.html" class="prev">
        08-变量声明
      </a></span> <span class="next"><a href="/pages/Vue3/vue3快速上手.html">
        vue3快速上手
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2d1dd0b0.js" defer></script><script src="/assets/js/2.07c258a3.js" defer></script><script src="/assets/js/18.9ae13edc.js" defer></script>
  </body>
</html>
